@import "@mantine/core/styles.layer.css";
@import "tailwindcss/theme.css" layer(theme);
@import "tailwindcss/utilities.css" layer(utilities);

:root {
    /* Color System */
    /* Primary Colors */
    --color-primary: #588157;
    --color-primary-light: #60a558;
    --color-primary-dark: #3d5a3d;

    /* Neutral Colors */
    --color-background: #ffffff;
    --color-background-dark: #444444;
    --color-background-alt: #f9f9f9;
    --color-background-alt-dark: #555555;

    /* Text Colors */
    --color-text: #2f2f2f;
    --color-text-dark: #ffffff;
    --color-text-muted: #666666;
    --color-text-muted-dark: #eeeeee;

    /* UI Colors */
    --color-border: #dddddd;
    --color-border-dark: #666666;
    --color-shadow: rgba(0, 0, 0, 0.1);
    --color-button: #2f2f2f;
    --color-button-text: #888888;

    /* Visual Feedback System */
    --color-success: #4caf50;
    --color-error: #f44336;
    --color-warning: #ff9800;
    --color-info: #2196f3;

    /* Focus outline colors */
    --focus-ring: rgba(88, 129, 87, 0.5);
    --focus-ring-offset: #ffffff;

    /* Typography System */
    --font-map: MontaguSlab, Arial, sans-serif;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 1.875rem;
    --line-height-tight: 1.2;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;

    /* Animation System */
    /* Transition Speeds */
    --transition-fast: 150ms;
    --transition-normal: 250ms;
    --transition-slow: 350ms;

    /* Transition Curves */
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
}

@font-face {
    font-family: "MontaguSlab";
    src: url(./fonts/MontaguSlab.ttf) format("truetype");
}

@font-face {
    font-family: "M PLUS 2";
    src: url(./fonts/Mplus2-Medium.otf) format("opentype");
}

/* Select Input Styling */
.mantine-InputBase-input {
    @apply w-full appearance-none rounded-lg border-2 border-solid border-(--color-border) bg-(--color-background-alt) p-3 text-(length:--font-size-base)/(--line-height-normal) text-(--color-text) transition-all duration-(--transition-fast) ease-(--ease-out) hover:transform-[translateY(-1px)] hover:border-(--color-primary) hover:bg-(--color-background) focus:transform-[translateY(-1px)] focus:border-(--color-primary) focus:bg-(--color-background) focus:shadow-md focus:outline-none;
}

.mantine-Combobox-dropdown {
    @apply bg-(--color-background-alt);
}

.mantine-Combobox-option {
    @apply hover:bg-(--color-background-dark) hover:text-(--color-text-dark);
}

.sliders-details .sliders-content {
    max-height: 0;
}

.sliders-details[open] .sliders-content {
    max-height: 500px;
}

.rmp-name-outline text {
    paint-order: stroke;
    /* Do not forget to define stroke-width when using this class! */
    stroke-linejoin: round;
    fill: var(--color-text);
}

.btn {
    @apply m-0 border-none bg-(--color-button) text-center text-(--color-button-text) transition-all duration-(--transition-fast) ease-out hover:transform-[translateY(-1px)] hover:shadow-md active:transform-[translateY(0px)];
}

.route-step {
    @apply mb-2.5 rounded-sm border-l-4 border-l-(--color-primary-light) bg-(--color-background-alt) p-2.5 transition-all duration-(--transition-normal) ease-out hover:transform-[translateX(4px)] hover:shadow-md;
}

.line-badge {
    @apply inline-block rounded-sm px-2 py-[3px] font-bold text-white;
}

.line-border {
    @apply my-5 border-b-1 border-b-(--color-border);
}

.hsr-badge {
    @apply relative after:absolute after:top-[-5px] after:right-[-5px] after:rounded-[3px] after:bg-[gold] after:px-[3px] after:py-[1px] after:text-[10px] after:text-black after:content-["â˜…"];
}

.transfer-station {
    @apply font-bold text-(--color-primary-light) transition-[color] duration-(--transition-fast) ease-out hover:text-(--color-primary-dark);
}

.station-count {
    @apply mt-[5px] text-(length:--font-size-sm)/(--line-height-normal) text-(--color-text-muted);
}

.total-time {
    @apply mt-2.5 text-(length:--font-size-lg)/(--line-height-tight) font-bold;
}

/* Fade In Animation */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in {
    animation: fadeIn var(--transition-normal) var(--ease-out);
}

/* Find Route Button */
.find-route-btn {
    @apply h-[36px] w-full cursor-pointer rounded-lg border-none bg-(--color-primary) px-2 font-bold text-white transition-all duration-(--transition-fast) ease-out hover:transform-[translateY(-1px)] hover:bg-(--color-primary-dark) hover:shadow-md active:transform-[translateY(0px)] active:shadow-none sm:w-auto;
}

/* I'm Feeling Lucky Button */
.feeling-lucky-btn {
    --d: 100px;
    --angle: 120deg;

    @apply h-[36px] w-full cursor-pointer rounded-lg border-none px-1 font-bold text-white transition-all duration-(--transition-fast) ease-out hover:transform-[translateY(-1px)] hover:bg-(--color-primary-dark) hover:shadow-md active:transform-[translateY(0px)] active:shadow-none sm:w-auto;
    background: repeating-linear-gradient(
        var(--angle),
        rgba(255, 0, 0, 1),
        rgba(255, 154, 0, 1),
        rgba(208, 222, 33, 1),
        rgba(79, 220, 74, 1),
        rgba(63, 218, 216, 1),
        rgba(47, 201, 226, 1),
        rgba(28, 127, 238, 1),
        rgba(95, 21, 242, 1),
        rgba(186, 12, 248, 1),
        rgba(251, 7, 217, 1),
        rgba(255, 0, 0, 1) var(--d)
    );
    background-size: calc(var(--d) / sin(var(--angle))) 100%;
    animation: rainbowGradient 2s linear infinite reverse;
}

@keyframes rainbowGradient {
    0% {
        background-position: calc(var(--d) / sin(var(--angle))) 0;
    }
}

/* Status Messages */
.status-message {
    @apply mb-4 rounded-sm p-3;
    animation: fadeIn var(--transition-normal) var(--ease-out);
}

.status-message--error {
    background-color: rgba(244, 67, 54, 0.1);
    color: var(--color-error);
    border-left: 4px solid var(--color-error);
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
    .mantine-InputBase-input {
        @apply border-(--color-border-dark) bg-(--color-background-alt-dark) text-(--color-text-dark) hover:bg-(--color-background-dark) hover:text-(--color-text-dark) focus:bg-(--color-background-dark) focus:shadow-md;
    }

    .mantine-Combobox-dropdown {
        @apply bg-(--color-background-dark);
    }

    .mantine-Combobox-option {
        @apply hover:bg-(--color-background) hover:text-(--color-text);
    }

    .rmp-name-outline text {
        fill: var(--color-text-dark);
    }

    .route-step {
        @apply bg-(--color-background-alt-dark);
    }

    .line-border {
        @apply border-b-(--color-border-dark);
    }

    .station-count {
        @apply text-(--color-text-muted-dark);
    }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}
